{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Helloworld.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import ItemE from \"./ItemE\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Helloworld extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    label: cc.Label = null;\r\n\r\n    @property(cc.Prefab)\r\n    item: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    cards: cc.Node = null;\r\n\r\n    @property\r\n    text: string = 'hello';\r\n\r\n    i: number = 0;\r\n\r\n    onLoad() {\r\n        this.cards.on(cc.Node.EventType.TOUCH_MOVE, this.onMoveTouch.bind(this));\r\n        this.cards.on(cc.Node.EventType.TOUCH_END, this.onEndTouch.bind(this));\r\n        this.cards.on(cc.Node.EventType.TOUCH_CANCEL, this.onEndTouch.bind(this));\r\n        this.cards.on(cc.Node.EventType.TOUCH_START, this.onMoveTouch.bind(this));\r\n        this.cards.children.forEach((n, i) => {\r\n            n.getComponent(ItemE).card = i;\r\n            // n.zIndex = i;\r\n        });\r\n    }\r\n\r\n    start() {\r\n        // init logic\r\n        this.label.string = this.text;\r\n\r\n        const id = setInterval(() => {\r\n            const flag = this.test();\r\n            if (flag) clearInterval(id);\r\n        }, 300);\r\n    }\r\n\r\n    test() {\r\n        const node = cc.instantiate(this.item);\r\n        node.parent = this.cards;\r\n        node.zIndex = this.i;\r\n        if (this.i > 2 && this.i < 5) {\r\n            node.getComponent(ItemE).group = 1;\r\n        }\r\n        this.i++;\r\n        return this.reset();\r\n    }\r\n\r\n    spacingX = 0;\r\n    restrictWidth = 300;\r\n    reset() {\r\n        this.spacingX = this.item.data.width / 2;\r\n        const targetCards = this.cards.children;\r\n        let width = 0;\r\n        let x = 0;\r\n        const cu = (targetCards.length - 1) * this.spacingX + this.item.data.width - this.restrictWidth;\r\n        if (cu > 0) {\r\n            const d = cu / targetCards.length;\r\n            this.spacingX -= d;\r\n        } else {\r\n            this.spacingX = this.item.data.width / 2;\r\n        }\r\n        targetCards.forEach((n, i) => {\r\n            n.stopAllActions();\r\n            if (i === 0) {\r\n                x = - n.width / 2;\r\n                width = n.width;\r\n            }\r\n            else {\r\n                x -= this.spacingX / 2;\r\n                n.x = i * this.spacingX;\r\n                // n.runAction(cc.moveTo(0.2, cc.p(i * this.spacingX), n.y));\r\n                width += this.spacingX;\r\n            }\r\n        });\r\n        this.cards.width = width;\r\n        this.cards.x = x;\r\n        return this.i > 15;\r\n    }\r\n\r\n\r\n    ///////////////////-------------\r\n\r\n    onMoveTouch(event) {\r\n        const target: cc.Node = event.target;\r\n        const loca = event.touch.getLocation();\r\n        const start = event.touch.getStartLocation();\r\n        const point = target.convertToNodeSpaceAR(loca);\r\n        const s = target.convertToNodeSpaceAR(start);\r\n        this.check(s, point);\r\n        // console.log(event.touch);\r\n    }\r\n\r\n    check(start, point: cc.Vec2) {\r\n        this.cards.children.forEach((n) => {\r\n            const comp = n.getComponent(ItemE);\r\n            if (comp) {\r\n                comp.onMove(start, point);\r\n            }\r\n        });\r\n    }\r\n\r\n    onCancelTouch() {\r\n        // 把自身加入\r\n        console.log('cancel...');\r\n    }\r\n    selectedCardNodes = [];\r\n    selectedCards = [];\r\n    removeCardNodes = [];\r\n    removeCards = [];\r\n    addselectCard(node: cc.Node, card: number) {\r\n        if (!cc.js.array.contains(this.selectedCardNodes, node)) {\r\n            this.selectedCardNodes.push(node);\r\n            this.selectedCards.push(card);\r\n        }\r\n    }\r\n    removeSelectCard(node: cc.Node, card: number) {\r\n        if (!cc.js.array.contains(this.removeCardNodes, node)) {\r\n            this.removeCardNodes.push(node);\r\n            this.removeCards.push(card);\r\n        }\r\n    }\r\n    cancelSelectCard(node: cc.Node, card: number) {\r\n        if (node.y === 0) {\r\n            if (cc.js.array.contains(this.selectedCardNodes, node)) {\r\n                cc.js.array.remove(this.selectedCardNodes, node);\r\n                cc.js.array.remove(this.selectedCards, card);\r\n            }\r\n        } else {\r\n            if (cc.js.array.contains(this.removeCardNodes, node)) {\r\n                cc.js.array.remove(this.removeCardNodes, node);\r\n            }\r\n        }\r\n    }\r\n\r\n    onEndTouch() {\r\n        cc.js.array.removeArray(this.selectedCardNodes, this.removeCardNodes);\r\n        cc.js.array.removeArray(this.selectedCards, this.removeCards);\r\n        for (const element of this.selectedCardNodes) {\r\n            this.upTo20(element);\r\n        }\r\n        for (const element of this.removeCardNodes) {\r\n            this.down0(element);\r\n        }\r\n        this.removeCardNodes = [];\r\n        this.removeCards = [];\r\n        console.log(this.selectedCardNodes);\r\n        console.log(this.selectedCards);\r\n\r\n        if (this.selectedCardNodes.length === 1) {\r\n            let num = 0;\r\n            const node = this.selectedCardNodes[0];\r\n            const comp1 = node.getComponent(ItemE);\r\n            this.cards.children.forEach((n) => {\r\n                const comp2 = n.getComponent(ItemE);\r\n                if (comp1.group === comp2.group) {\r\n                    num++;\r\n                }\r\n            });\r\n            this.onClick(this.selectedCardNodes[0], num);\r\n            console.log(num);\r\n        }\r\n    }\r\n\r\n    // 点一下扩散\r\n    onClick(node: cc.Node, num: number) {\r\n        if (!num) return;\r\n        const diff = node.width / 2 - this.spacingX;\r\n        // 不是自己\r\n        const comp1 = node.getComponent(ItemE);\r\n        this.songsan(node, num, diff);\r\n    }\r\n\r\n    songsan(node: cc.Node, num: number, diff: number) {\r\n        if (this.spacingX === node.width / 2) return;\r\n        this.reset();\r\n        const targetCards = this.cards.children;\r\n        let width = 0;\r\n        let x = 0;\r\n        let a = 0;\r\n        let b = 0;\r\n        const comp = node.getComponent(ItemE);\r\n        // 根据数量变化\r\n        const index = this.cards.children.indexOf(node);\r\n        const songsanNodes = [this.cards.children[index - 1], node, this.cards.children[index + 1]];\r\n        /**\r\n         * 需要松散的数量\r\n         */\r\n        const n = songsanNodes.length;\r\n        const songsanLen = n * node.width / 2;\r\n        // node.width是保证最后一张牌也在范围内 不然最后一张牌就出去了\r\n        const jinLen = (this.cards.width - songsanLen - node.width) / (this.cards.children.length - 1 - n)\r\n        let xRecord = 0;\r\n        console.log('节点宽度', this.cards.width)\r\n        targetCards.forEach((n, i) => {\r\n            if (i === 0) {\r\n                n.x = xRecord;\r\n            } else {\r\n                if (songsanNodes.indexOf(targetCards[ i-1 ]) >= 0) {\r\n                    xRecord += node.width / 2;\r\n                } else {\r\n                    xRecord += jinLen;\r\n                }\r\n                n.x = xRecord;\r\n            }\r\n        })\r\n        console.log('节点宽度', this.cards.width)\r\n        // targetCards.forEach((n, i) => {\r\n        //     n.stopAllActions();\r\n        //     const comp1 = n.getComponent(ItemE);\r\n        //     if (i === 0) {\r\n        //         x = - n.width / 2;\r\n        //         width = n.width;\r\n        //     }\r\n        //     else {\r\n        //         if (comp.group === comp1.group) {\r\n        //             n.x = i * (this.spacingX + diff);\r\n        //             a++;\r\n        //         } else {\r\n        //             console.log(a);\r\n        //             const xx = i * (this.spacingX) + (a + 1) * diff;\r\n\r\n        //             n.x = xx - (b * ((a + 1) * diff / (targetCards.length - 1 - num)));\r\n        //             b++;\r\n        //         }\r\n        //         x -= this.spacingX / 2;\r\n        //         width += this.spacingX;\r\n        //     }\r\n        // });\r\n        // this.cards.width = width;\r\n        // this.cards.x = x;\r\n    }\r\n\r\n    upTo20(node: cc.Node) {\r\n        const comp = node.getComponent(ItemE);\r\n        comp.selected = false;\r\n        node.color = node.getComponent(ItemE).ocolor;\r\n        node.y = 20;\r\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 20)));\r\n    }\r\n\r\n    down0(node) {\r\n        const comp = node.getComponent(ItemE);\r\n        comp.selected = false;\r\n        node.color = node.getComponent(ItemE).ocolor;\r\n        node.y = 0;\r\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 0)));\r\n    }\r\n}\r\n"]}