{"version":3,"sources":["../../../../assets/Script/assets/Script/Item.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import ItemE from \"./ItemE\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Item extends cc.Component {\n\n    onLoad() {\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onMoveTouch.bind(this));\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onEndTouch.bind(this));\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onEndTouch.bind(this));\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onMoveTouch.bind(this));\n        this.node.children.forEach((n, i) => {\n            n.getComponent(ItemE).card = i;\n            // n.zIndex = i;\n        });\n    }\n\n    onMoveTouch(event) {\n        const target: cc.Node = event.target;\n        const loca = event.touch.getLocation();\n        const start = event.touch.getStartLocation();\n        const point = target.convertToNodeSpaceAR(loca);\n        const s = target.convertToNodeSpaceAR(start);\n        this.check(s, point);\n        // console.log(event.touch);\n    }\n\n    check(start, point: cc.Vec2) {\n        this.node.children.forEach((n) => {\n            const comp = n.getComponent(ItemE);\n            if (comp) {\n                comp.onMove(start, point);\n            }\n        });\n    }\n\n    onCancelTouch() {\n        // 把自身加入\n        console.log('cancel...');\n    }\n    selectedCardNodes = [];\n    selectedCards = [];\n    removeCardNodes = [];\n    removeCards = [];\n    addselectCard(node: cc.Node, card: number) {\n        if (!cc.js.array.contains(this.selectedCardNodes, node)) {\n            this.selectedCardNodes.push(node);\n            this.selectedCards.push(card);\n        }\n    }\n    removeSelectCard(node: cc.Node, card: number) {\n        if (!cc.js.array.contains(this.removeCardNodes, node)) {\n            this.removeCardNodes.push(node);\n            this.removeCards.push(card);\n        }\n    }\n    cancelSelectCard(node: cc.Node, card: number) {\n        if (node.y === 0) {\n            if (cc.js.array.contains(this.selectedCardNodes, node)) {\n                cc.js.array.remove(this.selectedCardNodes, node);\n                cc.js.array.remove(this.selectedCards, card);\n            }\n        } else {\n            if (cc.js.array.contains(this.removeCardNodes, node)) {\n                cc.js.array.remove(this.removeCardNodes, node);\n            }\n        }\n    }\n\n    onStartTouch() {\n\n    }\n\n    onEndTouch() {\n        cc.js.array.removeArray(this.selectedCardNodes, this.removeCardNodes);\n        cc.js.array.removeArray(this.selectedCards, this.removeCards);\n        for (const element of this.selectedCardNodes) {\n            this.upTo20(element);\n        }\n        for (const element of this.removeCardNodes) {\n            this.down0(element);\n        }\n        this.removeCardNodes = [];\n        this.removeCards = [];\n        console.log(this.selectedCardNodes);\n        console.log(this.selectedCards);\n\n        if (this.selectedCardNodes.length === 1) {\n        }\n    }\n    upTo20(node: cc.Node) {\n        const comp = node.getComponent(ItemE);\n        comp.selected = false;\n        node.color = node.getComponent(ItemE).ocolor;\n        node.y = 20;\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 20)));\n    }\n\n    down0(node) {\n        const comp = node.getComponent(ItemE);\n        comp.selected = false;\n        node.color = node.getComponent(ItemE).ocolor;\n        node.y = 0;\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 0)));\n    }\n\n}"]}