{"version":3,"sources":["Item.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["import ItemE from \"./ItemE\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Item extends cc.Component {\r\n\r\n    onLoad() {\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onMoveTouch.bind(this));\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onEndTouch.bind(this));\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onEndTouch.bind(this));\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onMoveTouch.bind(this));\r\n        this.node.children.forEach((n, i) => {\r\n            n.getComponent(ItemE).card = i;\r\n            // n.zIndex = i;\r\n        });\r\n    }\r\n\r\n    onMoveTouch(event) {\r\n        const target: cc.Node = event.target;\r\n        const loca = event.touch.getLocation();\r\n        const start = event.touch.getStartLocation();\r\n        const point = target.convertToNodeSpaceAR(loca);\r\n        const s = target.convertToNodeSpaceAR(start);\r\n        this.check(s, point);\r\n        // console.log(event.touch);\r\n    }\r\n\r\n    check(start, point: cc.Vec2) {\r\n        this.node.children.forEach((n) => {\r\n            const comp = n.getComponent(ItemE);\r\n            if (comp) {\r\n                comp.onMove(start, point);\r\n            }\r\n        });\r\n    }\r\n\r\n    onCancelTouch() {\r\n        // 把自身加入\r\n        console.log('cancel...');\r\n    }\r\n    selectedCardNodes = [];\r\n    selectedCards = [];\r\n    removeCardNodes = [];\r\n    removeCards = [];\r\n    addselectCard(node: cc.Node, card: number) {\r\n        if (!cc.js.array.contains(this.selectedCardNodes, node)) {\r\n            this.selectedCardNodes.push(node);\r\n            this.selectedCards.push(card);\r\n        }\r\n    }\r\n    removeSelectCard(node: cc.Node, card: number) {\r\n        if (!cc.js.array.contains(this.removeCardNodes, node)) {\r\n            this.removeCardNodes.push(node);\r\n            this.removeCards.push(card);\r\n        }\r\n    }\r\n    cancelSelectCard(node: cc.Node, card: number) {\r\n        if (node.y === 0) {\r\n            if (cc.js.array.contains(this.selectedCardNodes, node)) {\r\n                cc.js.array.remove(this.selectedCardNodes, node);\r\n                cc.js.array.remove(this.selectedCards, card);\r\n            }\r\n        } else {\r\n            if (cc.js.array.contains(this.removeCardNodes, node)) {\r\n                cc.js.array.remove(this.removeCardNodes, node);\r\n            }\r\n        }\r\n    }\r\n\r\n    onStartTouch() {\r\n\r\n    }\r\n\r\n    onEndTouch() {\r\n        cc.js.array.removeArray(this.selectedCardNodes, this.removeCardNodes);\r\n        cc.js.array.removeArray(this.selectedCards, this.removeCards);\r\n        for (const element of this.selectedCardNodes) {\r\n            this.upTo20(element);\r\n        }\r\n        for (const element of this.removeCardNodes) {\r\n            this.down0(element);\r\n        }\r\n        this.removeCardNodes = [];\r\n        this.removeCards = [];\r\n        console.log(this.selectedCardNodes);\r\n        console.log(this.selectedCards);\r\n\r\n        if (this.selectedCardNodes.length === 1) {\r\n        }\r\n    }\r\n    upTo20(node: cc.Node) {\r\n        const comp = node.getComponent(ItemE);\r\n        comp.selected = false;\r\n        node.color = node.getComponent(ItemE).ocolor;\r\n        node.y = 20;\r\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 20)));\r\n    }\r\n\r\n    down0(node) {\r\n        const comp = node.getComponent(ItemE);\r\n        comp.selected = false;\r\n        node.color = node.getComponent(ItemE).ocolor;\r\n        node.y = 0;\r\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 0)));\r\n    }\r\n\r\n}"]}