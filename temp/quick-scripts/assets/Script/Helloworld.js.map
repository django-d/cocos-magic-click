{"version":3,"sources":["Helloworld.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import ItemE from \"./ItemE\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Helloworld extends cc.Component {\n\n    @property(cc.Label)\n    label: cc.Label = null;\n\n    @property(cc.Prefab)\n    item: cc.Prefab = null;\n\n    @property(cc.Node)\n    cards: cc.Node = null;\n\n    @property\n    text: string = 'hello';\n\n    i: number = 0;\n\n    onLoad() {\n        this.cards.on(cc.Node.EventType.TOUCH_MOVE, this.onMoveTouch.bind(this));\n        this.cards.on(cc.Node.EventType.TOUCH_END, this.onEndTouch.bind(this));\n        this.cards.on(cc.Node.EventType.TOUCH_CANCEL, this.onEndTouch.bind(this));\n        this.cards.on(cc.Node.EventType.TOUCH_START, this.onMoveTouch.bind(this));\n        this.cards.children.forEach((n, i) => {\n            n.getComponent(ItemE).card = i;\n            // n.zIndex = i;\n        });\n    }\n\n    start() {\n        // init logic\n        this.label.string = this.text;\n\n        const id = setInterval(() => {\n            const flag = this.test();\n            if (flag) clearInterval(id);\n        }, 300);\n    }\n\n    test() {\n        const node = cc.instantiate(this.item);\n        node.parent = this.cards;\n        node.zIndex = this.i;\n        if (this.i > 2 && this.i < 5) {\n            node.getComponent(ItemE).group = 1;\n        }\n        this.i++;\n        return this.reset();\n    }\n\n    spacingX = 0;\n    restrictWidth = 300;\n    reset() {\n        this.spacingX = this.item.data.width / 2;\n        const targetCards = this.cards.children;\n        let width = 0;\n        let x = 0;\n        const cu = (targetCards.length - 1) * this.spacingX + this.item.data.width - this.restrictWidth;\n        if (cu > 0) {\n            const d = cu / targetCards.length;\n            this.spacingX -= d;\n        } else {\n            this.spacingX = this.item.data.width / 2;\n        }\n        targetCards.forEach((n, i) => {\n            n.stopAllActions();\n            if (i === 0) {\n                x = - n.width / 2;\n                width = n.width;\n            }\n            else {\n                x -= this.spacingX / 2;\n                n.x = i * this.spacingX;\n                // n.runAction(cc.moveTo(0.2, cc.p(i * this.spacingX), n.y));\n                width += this.spacingX;\n            }\n        });\n        this.cards.width = width;\n        this.cards.x = x;\n        return this.i > 15;\n    }\n\n\n    ///////////////////-------------\n\n    onMoveTouch(event) {\n        const target: cc.Node = event.target;\n        const loca = event.touch.getLocation();\n        const start = event.touch.getStartLocation();\n        const point = target.convertToNodeSpaceAR(loca);\n        const s = target.convertToNodeSpaceAR(start);\n        this.check(s, point);\n        // console.log(event.touch);\n    }\n\n    check(start, point: cc.Vec2) {\n        this.cards.children.forEach((n) => {\n            const comp = n.getComponent(ItemE);\n            if (comp) {\n                comp.onMove(start, point);\n            }\n        });\n    }\n\n    onCancelTouch() {\n        // 把自身加入\n        console.log('cancel...');\n    }\n    selectedCardNodes = [];\n    selectedCards = [];\n    removeCardNodes = [];\n    removeCards = [];\n    addselectCard(node: cc.Node, card: number) {\n        if (!cc.js.array.contains(this.selectedCardNodes, node)) {\n            this.selectedCardNodes.push(node);\n            this.selectedCards.push(card);\n        }\n    }\n    removeSelectCard(node: cc.Node, card: number) {\n        if (!cc.js.array.contains(this.removeCardNodes, node)) {\n            this.removeCardNodes.push(node);\n            this.removeCards.push(card);\n        }\n    }\n    cancelSelectCard(node: cc.Node, card: number) {\n        if (node.y === 0) {\n            if (cc.js.array.contains(this.selectedCardNodes, node)) {\n                cc.js.array.remove(this.selectedCardNodes, node);\n                cc.js.array.remove(this.selectedCards, card);\n            }\n        } else {\n            if (cc.js.array.contains(this.removeCardNodes, node)) {\n                cc.js.array.remove(this.removeCardNodes, node);\n            }\n        }\n    }\n\n    onEndTouch() {\n        cc.js.array.removeArray(this.selectedCardNodes, this.removeCardNodes);\n        cc.js.array.removeArray(this.selectedCards, this.removeCards);\n        for (const element of this.selectedCardNodes) {\n            this.upTo20(element);\n        }\n        for (const element of this.removeCardNodes) {\n            this.down0(element);\n        }\n        this.removeCardNodes = [];\n        this.removeCards = [];\n        console.log(this.selectedCardNodes);\n        console.log(this.selectedCards);\n\n        if (this.selectedCardNodes.length === 1) {\n            let num = 0;\n            const node = this.selectedCardNodes[0];\n            const comp1 = node.getComponent(ItemE);\n            this.cards.children.forEach((n) => {\n                const comp2 = n.getComponent(ItemE);\n                if (comp1.group === comp2.group) {\n                    num++;\n                }\n            });\n            this.onClick(this.selectedCardNodes[0], num);\n            console.log(num);\n        }\n    }\n\n    // 点一下扩散\n    onClick(node: cc.Node, num: number) {\n        if (!num) return;\n        const diff = node.width / 2 - this.spacingX;\n        // 不是自己\n        const comp1 = node.getComponent(ItemE);\n        this.songsan(node, num, diff);\n    }\n\n    songsan(node: cc.Node, num: number, diff: number) {\n        if (this.spacingX === node.width / 2) return;\n        this.reset();\n        const targetCards = this.cards.children;\n        let width = 0;\n        let x = 0;\n        let a = 0;\n        let b = 0;\n        const comp = node.getComponent(ItemE);\n        targetCards.forEach((n, i) => {\n            n.stopAllActions();\n            const comp1 = n.getComponent(ItemE);\n            if (i === 0) {\n                x = - n.width / 2;\n                width = n.width;\n            }\n            else {\n                if (comp.group === comp1.group) {\n                    n.x = i * (this.spacingX + diff);\n                    a++;\n                } else {\n                    console.log(a);\n                    const xx = i * (this.spacingX) + (a + 1) * diff;\n\n                    n.x = xx - (b * ((a + 1) * diff / (targetCards.length - 1 - num)));\n                    b++;\n                }\n                x -= this.spacingX / 2;\n                width += this.spacingX;\n            }\n        });\n        this.cards.width = width;\n        this.cards.x = x;\n    }\n\n    upTo20(node: cc.Node) {\n        const comp = node.getComponent(ItemE);\n        comp.selected = false;\n        node.color = node.getComponent(ItemE).ocolor;\n        node.y = 20;\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 20)));\n    }\n\n    down0(node) {\n        const comp = node.getComponent(ItemE);\n        comp.selected = false;\n        node.color = node.getComponent(ItemE).ocolor;\n        node.y = 0;\n        // node.runAction(cc.moveTo(0.1, cc.p(node.x, 0)));\n    }\n}\n"]}